<h1>Solicitar extrato</h1>

<script type="text/javascript">
  $(document).ready(function(){

    $(".datepicker").datepicker({
      fomart: "dd/mm/yyyy",
      language: "pt-BR"
    });

    $("#form_extract").validate({
      rules: {
        data_ini: {
          required: true
        },
        data_fin: {
          required: true
        },
        "account_id[0]": {
          required: true
        }
      },
      messages: {
        data_ini: {
          required: "Campo obrigatório",
          valid: "asd"
        },
        data_fin: {
          required: "Campo obrigatório"
        },
        "account_id[0]": {
          required: "Campo obrigatório"
        }
      },
      errorPlacement: function(error, element) {
        offset = element.offset();
        error.insertAfter(element.parent());
        error.addClass("validationError");
      }
    });
  });
</script>

<%= form_tag extract_path, :id => 'form_extract', method: :post do %>

  <div class="field">
    <label>Conta</label>
    <p><%= collection_select(:account_id, 0, Account.where(:user_id => current_user.id, :status => "Ativa"), :id, :number, prompt: "Selecione a conta") %></p>
  </div>

  <div class="field">
    <label>Data inicial</label>
    <p><input type="text" class="datepicker" name="data_ini" autocomplete="off"></p>
  </div>

  <div class="field">
    <label>Data final</label>
    <p><input type="text" class="datepicker" name="data_fin" autocomplete="off"></p>
  </div>

  <div class="field">
    <button type="submit" value="Solicitar" class="acao">Solicitar</button>
  </div>

<% end %>

<%= link_to '<button>Voltar</button>'.html_safe, accounts_path %>
